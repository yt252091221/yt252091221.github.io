---
layout: post
title: D455标定
tag: camera
description: “相机标定”
---

# 一、Ubuntu18.04安装VINS-Fusion

## 1.1安装ceres

- VINS-Fusion依赖的Ceres库版本已经很老了，最近版本的ceres并不支持VINS-Fusion。VINS-Fusion比较适配的Ceres版本是1.14。

```cpp
$ sudo apt-get install -y cmake libgoogle-glog-dev libatlas-base-dev libsuitesparse-dev
$ wget http://ceres-solver.org/ceres-solver-1.14.0.tar.gz
$ tar zxf ceres-solver-1.14.0.tar.gz
$ mkdir ceres-bin && cd ceres-bin
$ cmake ../ceres-solver-1.14.0 && make -j8
$ make test
$ sudo make install
```

## 1.2编译
<blockquote>
如果你的电脑安装了Opecv4，那么你需要进行这一步的修改，如果没有安装请忽略此步。
</blockquote>
由于VINS-Fusion依赖的是OpenCV3,为了避免找的OpenCV的版本是OpenCV4的版本，我们需要修改CMakeList.txt。分别修改以下三个文件夹中的CMakeList.txt找到find_package(OpenCV REQUIRED),并在后面填上版本号。
```cpp
find_package(OpenCV REQUIRED) #修改前
find_package(OpenCV 3 REQUIRED) #修改前
###或
find_package(OpenCV ) #修改前
find_package(OpenCV 3 ) #修改前
```
尝试运行以下命令进行编译：
```cpp
cd ~/catkin_ws
catkin_make
```


# 二、安装Intel® RealSense™ SDK 2.0
-  Intel® RealSense™ SDK 2.0 的DKMS内核驱动包（librealsense2-dkms）支持Ubuntu LTS内核版本4.4、4.8、4.10、4.13、4.15、4.18、5.0、5.3、5.4。

## 2.1查看自己的内核版本：
```cpp
sudo cat /proc/version
```
 如果非上述版本，需要手动安装和修补版本，请移步官网教程：
 <blockquote>
 <a href="https://github.com/IntelRealSense/librealsense/blob/master/doc/distribution_linux.md" target="_blank">下载地址</a>
 </blockquote>
本教程不适合你。

## 2.2 注册服务器公钥：
```cpp
sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-key F6E65AC044F831AC80A06380C8B3A55A6F3EFCDE || sudo apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv-key F6E65AC044F831AC80A06380C8B3A55A6F3EFCDE
```
如果公钥无法检索，检查并指定代理设置：
```cpp
export http_proxy="http://<proxy>:<port>"
```
重新运行该命令。

## 2.3将服务器添加到储存库列表
```cpp
sudo add-apt-repository "deb https://librealsense.intel.com/Debian/apt-repo $(lsb_release -cs) main" -u
```
## 2.4 安装库
```cpp
sudo apt-get install librealsense2-dkms
sudo apt-get install librealsense2-utils
```

## 2.5 可选择安装开发人员和调试包：

```cpp
sudo apt-get install librealsense2-dev
sudo apt-get install librealsense2-dbg
```
## 2.6 验证内核是否已经更新：

```cpp
modinfo uvcvideo | grep "version:"
```
version后面出现realsense表示更新成功。

## 2.7 启动realsense-viewer
插入D455相机，可能需要USB3.0及以上接口。启动realsense-viewer：

```cpp
realsense-viewer
```
通过界面左侧的选项可以打开imu，双目和rgb相机模块，右上可切换2D、3D界面：

插入图片

 成功！退出realsense-viewer界面。

#三、realsense-ros的安装与编译
## 3.1创建工作空间
创建工作空间 ，这里~/Packages/RealsenseRos_ws可以自定义路径，但必须包含/src：
```cpp
mkdir -p ~/Packages/RealsenseRos_ws/src
cd ~/Packages/RealsenseRos_ws/src
```
## 3.2 从github上下载realsense-ros并修改指针：

```cpp
git clone https://github.com/IntelRealSense/realsense-ros.git
cd realsense-ros/
git checkout `git tag | sort -V | grep -P "^2.\d+\.\d+" | tail -1`
cd ..
```
